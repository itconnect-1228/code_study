# TASK-064: 파일 검증 유틸리티

## 무엇을 만들었나요?

코드 파일을 업로드할 때 안전하고 올바른 파일인지 확인하는 "경비원" 시스템을 만들었습니다. 마치 건물 입구에서 출입증을 확인하는 보안 요원처럼, 이 시스템은 모든 업로드 파일을 검사합니다.

## 왜 이렇게 만들었나요?

사용자가 실수로 또는 의도적으로 위험한 파일을 업로드하면 시스템에 문제가 생길 수 있습니다. 예를 들어:
- 바이러스가 포함된 실행 파일(.exe)
- 너무 큰 파일로 인한 서버 과부하
- 이미지나 동영상 같은 분석 불가능한 파일

이런 문제를 미리 막기 위해 4가지 검증 단계를 거칩니다.

## 어떻게 작동하나요?

### 1. 파일 확장자 검사
식당에서 메뉴에 있는 음식만 주문할 수 있는 것처럼, 허용된 확장자(.py, .js, .html 등)만 업로드할 수 있습니다.

### 2. 파일 크기 검사
우체국에서 소포 무게 제한이 있듯이, 10MB 이상의 파일은 업로드할 수 없습니다.

### 3. 바이너리 파일 탐지
텍스트 파일인지 실행 파일인지 구분합니다. 파일의 "지문"(매직 바이트)을 확인하고, 사람이 읽을 수 없는 이상한 문자가 많으면 바이너리 파일로 판단합니다.

### 4. 제외 경로 탐지
`.git`, `node_modules`, `__pycache__` 같은 시스템 폴더는 자동으로 제외됩니다. 마치 도서관에서 직원 전용 구역을 일반인이 들어갈 수 없는 것과 같습니다.

## TDD 테스트 과정

### RED 단계
먼저 58개의 테스트를 작성했습니다. 각 테스트는 하나의 기능만 확인합니다:
- Python 파일 허용되는지?
- 10MB 넘는 파일 거부되는지?
- PNG 이미지 탐지되는지?

### GREEN 단계
테스트가 모두 통과하도록 `file_validator.py`를 구현했습니다.

### REFACTOR 단계
코드를 깔끔하게 정리하고 docstring을 추가했습니다.

## 수정된 파일

- `backend/src/utils/file_validator.py` - 새로 생성 (검증 로직)
- `backend/tests/unit/test_file_validator.py` - 새로 생성 (58개 테스트)

## 관련 개념

- **화이트리스트**: 허용된 것만 통과시키는 보안 방식
- **매직 바이트**: 파일 종류를 알려주는 파일 시작 부분의 특별한 바이트
- **소프트 삭제**: 완전히 삭제하지 않고 휴지통으로 이동하는 방식

## 주의사항

- 파일 확장자만으로는 100% 안전하지 않습니다. 누군가 `.py` 확장자로 바이러스를 숨길 수 있으므로 바이너리 탐지도 함께 수행합니다.
- UTF-8 인코딩의 한글, 일본어 등도 텍스트로 올바르게 인식됩니다.

## 다음 단계

T065에서는 Pygments 라이브러리를 사용해 업로드된 코드가 어떤 프로그래밍 언어인지 자동으로 감지하는 기능을 구현합니다.
